# 코드 리뷰 가이드

> PR을 열기 전, 아래 체크리스트를 직접 먼저 확인하세요.
> 리뷰어는 이 가이드를 기준으로 피드백을 작성합니다.

---

## 체크리스트

### 1. 커밋 단위

커밋은 **하나의 논리적 변경**만 포함해야 합니다.

| 확인 항목 | 기준 |
|-----------|------|
| 하나의 커밋이 여러 기능/버그를 동시에 수정하지 않는가 | 기능 추가 + 버그 수정은 별도 커밋으로 분리 |
| 하나의 커밋을 둘 이상으로 나눌 수 있는가 | 나눌 수 있다면 분리 필요 |
| 관련 없는 파일 변경이 함께 포함되지 않는가 | 리팩토링과 기능 변경은 별도 커밋 |

**분리 기준 예시**

```
# 잘못된 예 — 하나의 커밋에 여러 관심사가 섞임
feat: 로그인 기능 추가 및 회원가입 버그 수정, 불필요한 코드 제거

# 올바른 예 — 커밋마다 하나의 관심사
feat: 로그인 기능 추가
fix: 회원가입 시 이메일 중복 검사 오류 수정
refactor: 인증 모듈 불필요한 코드 제거
```

---

### 2. 테스트 코드

새로운 코드에는 반드시 테스트가 수반되어야 합니다.

| 확인 항목 | 기준 |
|-----------|------|
| 새 기능에 대한 테스트가 작성되었는가 | 신규 함수 / 클래스 / 엔드포인트마다 테스트 필요 |
| 버그 수정 시 해당 케이스를 재현하는 테스트가 있는가 | 회귀 테스트로 동일 버그 재발 방지 |
| 정상 케이스(happy path)와 예외 케이스가 모두 커버되는가 | 경계값, 잘못된 입력, 예외 상황 포함 |
| 기존 테스트가 모두 통과하는가 | 사이드 이펙트 없는지 확인 |

**테스트 파일 위치 규칙**

```
src/
  user/
    service.py
tests/
  user/
    test_service.py   ← 대응하는 테스트 파일
```

**면제 대상** (테스트 없이 허용되는 경우)

- `docs/`, `chore:` 타입 커밋 (문서, 설정 변경)
- 단순 상수 정의, 데이터 클래스 (로직 없음)

---

### 3. 코드 컨벤션

[CODING_CONVENTION.md](CODING_CONVENTION.md)와 [CODING_GUIDE.md](CODING_GUIDE.md) 기준으로 검토합니다.

| 확인 항목 | 세부 내용 |
|-----------|-----------|
| 네이밍 규칙 | `snake_case` (변수/함수), `PascalCase` (클래스), `UPPER_SNAKE_CASE` (상수) |
| 타입 힌트 | 모든 함수 파라미터와 반환값에 타입 힌트 명시, `typing` 구버전 타입 미사용 |
| 줄 길이 | 최대 120자 초과 없음 |
| import 순서 | 표준 라이브러리 → 서드파티 → 내부 모듈 순 |
| 가변 기본 인자 | 함수 기본 인자로 `[]`, `{}` 직접 사용 금지 |
| 불필요한 코드 | 주석 처리된 코드, 미사용 변수/import 없음 |

> Ruff가 자동으로 검사하는 항목은 pre-commit 훅이 처리합니다.
> 리뷰어는 **자동화로 잡히지 않는 설계 수준의 컨벤션**에 집중합니다.

---

### 4. 커밋 메시지

[COMMIT_MESSAGE.md](COMMIT_MESSAGE.md) 기준으로 검토합니다.

| 확인 항목 | 기준 |
|-----------|------|
| 변경된 내용이 모두 메시지에 반영되었는가 | 코드 변경과 커밋 메시지 간 누락 없이 일치 |
| 올바른 타입을 사용하였는가 | `feat`, `fix`, `refactor`, `test`, `docs`, `chore` 등 |
| 헤더가 50자 이내로 명확하게 작성되었는가 | 모호한 표현 (`수정`, `업데이트`) 지양 |
| Body에 **왜** 변경했는지 설명이 있는가 | 복잡한 변경은 이유 설명 필수 |
| Breaking Change가 있다면 Footer에 명시했는가 | `BREAKING CHANGE:` 접두사 사용 |

**커밋 메시지와 변경 내용 불일치 예시**

```
# 커밋 메시지: feat: 로그인 기능 추가
# 실제 변경: 로그인 + 로그아웃 + 세션 관리 로직 포함
→ 메시지가 실제 변경 범위를 담지 못함. 커밋 분리 또는 메시지 보완 필요.
```

---

## 리뷰 판정 기준

| 판정 | 의미 | 적용 상황 |
|------|------|-----------|
| **Approve** | 승인 | 모든 체크리스트 통과, 사소한 의견은 코멘트로만 남김 |
| **Request Changes** | 수정 요청 | 필수 체크리스트 항목 미통과, 버그 또는 보안 이슈 발견 |
| **Comment** | 의견 제시 | 승인/반려 없이 질문 또는 제안만 남길 때 |

---

## 피드백 작성 원칙

- **필수(Must)** / **권장(Should)** / **선택(Nit)** 을 명시하여 우선순위를 구분합니다.
- 문제점만 지적하지 않고 **개선 방향이나 예시 코드**를 함께 제시합니다.
- 개인 취향이 아닌 **이 가이드 또는 명확한 근거**를 기반으로 피드백합니다.

```
# 피드백 예시

[Must] 커밋 단위
로그인 기능 추가와 기존 버그 수정이 하나의 커밋에 포함되어 있습니다.
두 개의 커밋으로 분리해 주세요.

[Should] 테스트 누락
`UserService.create_user()`에 대한 테스트가 없습니다.
정상 케이스와 이메일 중복 케이스를 커버하는 테스트를 추가해 주세요.

[Nit] 네이밍
`userData` → `user_data` (snake_case 규칙)
```